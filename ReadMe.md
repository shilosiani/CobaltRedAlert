# מערכת התראות פיקוד העורף (SMS / Email)

מערכת זו בודקת את אתר פיקוד העורף, ואם מתקבלת התראה רלוונטית לאזורים שנבחרו – נשלחת הודעה למשתמשים דרך SMS (API של 019) או מייל (Gmail).
אין לסמוך על המערכת כתחליף להתראות הרשמיות בשום צורה שהיא!

---

## דרישות מערכת

יש לוודא ש־Python 3.7 ומעלה מותקן.

### התקנת תלויות:

```bash
pip install -r requirements.txt
```


---

## קבצים עיקריים

| קובץ | תיאור |
|------|--------|
| `RedAlertToSMS.py` | סקריפט לשליחת התראות בפורמט SMS דרך 019 |
| `RedAlertToMail.py` | סקריפט לשליחת התראות בדוא"ל דרך Gmail |
| `RedAlertDesktop.py` | מציג פופאפ על שולחן העבודה במקרה שהתקבלה התראה באיזורים שהוגדרו |
| `mails.txt` | רשימת כתובות מייל (שורה לכל כתובת) - משמש בגרסת המייל |
| `Alerts.json` | מבנה קובץ ההתראות של פיקוד העורף |
| `RedAlertScan.py` | סקריפט דוגמא לניתוח קובץ הJSON של פקע"ר. (לא צריך להוריד אותו כחלק מהפרוייקט, אנחנו מספקים אותו כדוגמא. הקוד הזה כבר משולב בסקריפטים שכוללים שליחה) |

מנגנון הסריקה זהה ביסודו בכל הקבצים, אך הקובץ העדכני ביותר הוא הקובץ של שליחת הSMS.


---

## שימוש

### שליחת מייל:

1. ערוך את הקובץ והכנס את פרטי החשבון:
```python
EMAIL_ADDRESS = 'YOUR_GMAIL'
EMAIL_PASSWORD = 'YOUR_APP_PASS'
```
<details>
<summary>📌 איך מקבלים סיסמת אפליקציה (App Password) בג'ימייל?</summary>

1. היכנס לחשבון ה־Google שלך: [https://myaccount.google.com](https://myaccount.google.com)

2. עבור ללשונית **אבטחה** (Security)

3. ודא שהפעלת **אימות דו־שלבי** (2-Step Verification)

4. לאחר מכן יופיע סעיף חדש – **סיסמאות אפליקציה** (App Passwords)

5. לחץ על **יצירת סיסמה חדשה**:
   - בחר באפליקציה (`Mail`)
   - בחר במכשיר (`Other`) וכתוב לדוגמה: `PikudAlert`

6. תתקבל סיסמה בת 16 תווים – השתמש בה כ־`EMAIL_PASSWORD` בקוד


</details>

2. הכנס כתובות מייל לקובץ `mails.txt` (שורה אחת לכל כתובת).

3. הרץ את הסקריפט:
```bash
python RedAlertToMail.py
```

---

### שליחת SMS:

1. ערוך את הקובץ והכנס את פרטי ה־API:
```python
"Authorization": "Bearer YOUR_TOKEN_HERE"
"username": "YOUR_USERNAME"
"source": "YOUR_SENDER"
"cl_id": ["YOUR_CL_ID"]
```
לפירוט על הAPI של 019, ראה כאן
https://github.com/AshiVered/019_SMS.py
הסקריפט משתמש במבנה JSON.

2. הרץ את הסקריפט:
```bash
python RedAlertToSMS.py
```

---

##  אזורי התראה

ניתן לערוך את קבוצת האזורים המוגדרים ב`ALLOWED_AREAS` בקובץ. רק התראות עבור אזורים אלו ישלחו.

---

## קריאות לשרת פקע"ר

הסקריפט רץ בלולאה תמידית ובודק התראות כל שניה. ניתן לשנות זאת ע"י עריכת השורה:
```python
time.sleep(1)
```
כדי שלא תתקבל התראה זהה פעמיים, עשינו שאחרי שהוא מזהה התראה יחכה 100 שניות (כאמור, לא בקובץ הזה), כי ההתראות הכי ארוכות ממה שבדקנו נשארות בקובץ הנ"ל דקה וחצי ורצינו לקחת קצת מרווח ביטחון.

אם אתם רוצים לדמות התראות לצורך בדיקות, העלו את קובץ Alerts.json לשרת שלכם והזינו בסקריפט את הקישור אליו. הוא באותו המבנה כמו זה של פיקוד העורף.

---

---

## פיתוח ותרומה

תרגישו חופשי להציע שיפורים, לדווח על באגים או להוסיף תכונות חדשות.

אהבתם את התוכנה? אפשר לתרום לי כאן
https://ko-fi.com/ashivered

---

